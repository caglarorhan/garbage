<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cam test</title>
</head>
<body>
<label for="barcode">Take a barcode/qrcode picture:</label>

<input type="file"
       id="barcode" name="barcode"
       accept="image/png, image/jpeg" capture="capture">

<span id="targetImage"></span>

<script>
    // check compatibility
    if (!('BarcodeDetector' in window)) {
        console.log('Barcode Detector is not supported by this browser.');
    } else {
        console.log('Barcode Detector supported!');

        // create new detector
        var barcodeDetector = new BarcodeDetector({formats: ['code_39', 'codabar', 'ean_13']});
    }

    // check supported types
    BarcodeDetector.getSupportedFormats()
        .then(supportedFormats => {
            supportedFormats.forEach(format => console.log(format));
        });

    let imageEl = document.getElementById("barcode").value;
    barcodeDetector.detect(imageEl)
        .then(barcodes => {
            barcodes.forEach(barcode => console.log(barcode.rawData));
        })
        .catch(err => {
            console.log(err);
        })

</script>
</body>
</html>
