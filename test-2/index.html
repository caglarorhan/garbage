<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cam test</title>
</head>
<body>
<label for="barcodeContainingImage">Take a barcode/qrcode picture:</label>

<input type="file"
       id="barcodeContainingImage" name="barcodeContainingImage"
       accept="image/png, image/jpeg" capture="environment">

<span id="theBarcodeValue">BARCODE DATA PLACE</span>



<script>
    window.addEventListener('load',()=>{
        let barcodeContainingImage = document.getElementById('barcodeContainingImage');
        barcodeContainingImage.addEventListener('change',()=>{
            let file = barcodeContainingImage.files[0];
            document.getElementById('theBarcodeValue').innerHTML='File is ready...';
            bD.detect(file);

        });
    });

    const bD = {
        barcodeFormats: [
            "aztec",
            "code_128",
            "code_39",
            "code_93",
            "codabar",
            "data_matrix",
            "ean_13",
            "ean_8",
            "itf",
            "pdf417",
            "qr_code",
            "unknown",
            "upc_a",
            "upc_e"],
        barcodeContainingImage: document.getElementById('barcodeContainingImage'),
        barcodeContainer: document.getElementById("theBarcodeValue"),
        detect: async (file) => {
            document.getElementById('theBarcodeValue').innerHTML="Detection started";
            let detector = new BarcodeDetector()
            const result = await detector.detect(file);
            document.getElementById('theBarcodeValue').innerHTML = JSON.stringify(result, null, 2);
        }
    }




</script>
</body>
</html>
